<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <script src="index.js"></script>
    <title>Calculator</title>
</head>
<body>
    <div class="calculator">
        <input autofocus id="equation" class="text-area"></input>
        <div class="input-grid">
            <button onclick="onClick(this, 'function')" class="number">sin</button>
            <button onclick="onClick(this, 'function')" class="number">cos</button>
            <button onclick="onClick(this, 'function')" class="number">tan</button>
            <button onclick="onClick(this, 'clear')" class="number">Clear</button>
            <button onclick="onClick(this, 'function')" class="number">csc</button>
            <button onclick="onClick(this, 'function')" class="number">sec</button>
            <button onclick="onClick(this, 'function')" class="number">cot</button>
            <button onclick="onClick(this, 'delete')" class="number">Delete</button>
            <button onclick="onClick(this, 'function')" class="number">arcsin</button>
            <button onclick="onClick(this, 'function')" class="number">arccos</button>
            <button onclick="onClick(this, 'function')" class="number">arctan</button>
            <button onclick="onClick(this, 'exponent')" class="number">xⁿ</button>
            <button onclick="onClick(this, 'function')" class="number">arcctg</button>
            <button onclick="onClick(this, 'function')" class="number">log</button>
            <button onclick="onClick(this, 'function')" class="number">ln</button>
            <button onclick="onClick(this, 'add')" class="number">+</button>
            <button onclick="onClick(this, 'add')" class="number">(</button>
            <button onclick="onClick(this, 'add')" class="number">)</button>
            <button onclick="onClick(this, 'add')" class="number">e</button>
            <button onclick="onClick(this, 'add')" class="number">-</button>
            <button onclick="onClick(this, 'add')" class="number">7</button>
            <button onclick="onClick(this, 'add')" class="number">8</button>
            <button onclick="onClick(this, 'add')" class="number">9</button>
            <button onclick="onClick(this, 'multiply')" class="number">⨯</button>
            <button onclick="onClick(this, 'add')" class="number">4</button>
            <button onclick="onClick(this, 'add')" class="number">5</button>
            <button onclick="onClick(this, 'add')" class="number">6</button>
            <button onclick="onClick(this, 'divide')" class="number">÷</button>
            <button onclick="onClick(this, 'add')" class="number">1</button>
            <button onclick="onClick(this, 'add')" class="number">2</button>
            <button onclick="onClick(this, 'add')" class="number">3</button>
            <button onclick="onClick(this, 'add')" class="number">.</button>
            <button class="blank"></button>
            <button onclick="onClick(this, 'add')" class="number">0</button>
            <button class="blank"></button>
            <button onclick="onEnter()" class="number">=</button>
        </div>
    </div>
    <script>
        // TODO: 
        // 1. Add mathematic expression evaluation function
        // 2. Add error handling

        var equation = document.getElementById("equation");

        equation.addEventListener("keyup", (event) => {
            if(event.keyCode == 27) {
                equation.blur();
            }
        });

        equation.addEventListener("keydown", (event) => {
            if(event.keyCode == 13) {
                onEnter();
            }
        });

        onEnter = () => {
            equation.value = eval(equation.value);
        }

        // handling for button interaction other than equals
        onClick = (input, type) => {
            switch (type) {
                case "add":
                    document.getElementById("equation").value += input.textContent;
                    break;
                case "function":
                    document.getElementById("equation").value += input.textContent + "(";
                    break;
                case "multiply":
                    document.getElementById("equation").value += "*";
                    break;
                case "divide":
                    document.getElementById("equation").value += "/";
                    break;
                case "exponent":
                    document.getElementById("equation").value += "**";
                    break;
                case "delete":
                    document.getElementById("equation").value = document.getElementById("equation").value.slice(0, -1);
                    break;
                case "clear":
                    document.getElementById("equation").value = "";
                    break;
                default:
                    break;
            }
            document.getElementById("equation").focus();
        }

    </script>
</body>
</html>